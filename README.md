# Бот для контроля давления и приема лекарств

## Telegram-бот BP Monitor

Этот Telegram-бот предназначен для людей с гипертонией и другими сердечно-сосудистыми заболеваниями, которым необходимо регулярно контролировать артериальное давление и принимать лекарства по расписанию. Бот помогает пользователям:

- Вести учет показателей артериального давления и пульса
- Настраивать напоминания о приеме лекарств
- Анализировать динамику показателей давления
- Экспортировать данные для консультации с врачом

Бот особенно полезен для пожилых людей и пациентов с хроническими заболеваниями, которым важно соблюдать режим приема лекарств и контролировать свое состояние.

## Функциональные возможности

### Отслеживание давления
- Запись показателей артериального давления (систолическое, диастолическое) и пульса
- Добавление заметок к измерениям (например, о самочувствии или обстоятельствах)
- Просмотр истории измерений
- Статистический анализ показателей за неделю

### Управление лекарствами
- Добавление лекарств с указанием названия
- Настройка расписания приема (1-3 раза в день)
- Выбор точного времени для напоминаний
- Автоматические напоминания о приеме лекарств в указанное время
- Просмотр и редактирование списка лекарств

### Аналитика и экспорт
- Расчет средних показателей давления за неделю
- Экспорт данных в Excel для дальнейшего анализа или предоставления врачу

## Команды бота

- `/start` - Начало работы с ботом
- `/pressure` - Записать показатели давления
- `/medication` - Добавить лекарство и напоминание
- `/history` - Показать историю измерений
- `/note` - Добавить заметку к последнему измерению
- `/stats` - Показать статистику за неделю
- `/export` - Экспортировать данные в Excel
- `/test` - Проверить работоспособность бота

## Техническая информация

### Используемые технологии
- Python 3.x
- python-telegram-bot - библиотека для работы с Telegram Bot API
- pandas - для обработки и анализа данных
- schedule - для планирования напоминаний
- pytz - для работы с часовыми поясами
- openpyxl - для экспорта данных в Excel

### Хранение данных
Бот использует CSV-файлы для хранения данных:
- `pressure_data.csv` - история измерений давления
- `medications.csv` - информация о лекарствах и расписании приема

### Настройка и запуск

1. Создайте файл `.env` в корневой директории проекта со следующим содержимым:
   ```
   TELEGRAM_BOT_TOKEN=ваш_токен_бота
   ```

2. Установите необходимые зависимости:
   ```
   pip install python-telegram-bot pandas python-dotenv schedule pytz openpyxl
   ```

3. Запустите бота:
   ```
   python pressure_bot_full.py
   ```

## Особенности реализации

- Многопоточная архитектура для одновременной обработки сообщений и отправки напоминаний
- Асинхронные обработчики команд для быстрого отклика бота
- Интерактивные кнопки для удобства взаимодействия
- Обработка исключений для стабильной работы
- Часовой пояс Москвы (Europe/Moscow) для корректных временных меток

## Планы по развитию

- Добавление графиков для визуализации динамики давления
- Интеграция с медицинскими сервисами
- Расширенная аналитика показателей
- Поддержка нескольких языков
- Настройка персональных целевых показателей давления
